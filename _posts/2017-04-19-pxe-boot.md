---
layout: post
title: "A step by step guide to installing Ubuntu Server over the network"
comments: true
---

It is a fairly straightforward and simple process to boot a server and
install Ubuntu using PXE (Preboot eXecution Environment).

Here's a list of things needed:

- Obviously, the computer with PXE-enabled BIOS onto which Ubuntu is to
  be installed. In PXE terms, this computer is called a PXE client.
- Another computer with an Ethernet port running a fresh version of
  Ubuntu. This computer is called a PXE server.
- An Ethernet patch cable.
- Internet access.

PXE uses a combination of two standard protocols, DHCP and TFTP
(TFTP is a UDP-based protocol not to be confused with FTP).

Let's install the required packages on the PXE server:

    # apt-get install -y tftpd-hpa isc-dhcp-server

Now download and extract the netboot image for Ubuntu:

    # dist=http://archive.ubuntu.com/ubuntu/dists/zesty

    # curl $dist/main/installer-amd64/current/images/netboot/netboot.tar.gz | \
        tar xzf - -C /var/lib/tftpboot

In the example above, the `dist` URL is for Ubuntu 17.04, which
was the latest version at the time of writing. For the most recent
Ubuntu version, see [Alternative downloads on
ubuntu.com](https://www.ubuntu.com/download/alternative-downloads).

At this point, the TFTP server is ready for use. Let's configure the
DHCP server.

Because we'll be starting a DHCP server, in order not to disturb any LAN
participants, let's connect the PXE client and server together using a
patch cable. A regular cable will do; using a crossover cable is not
required since all modern network cards have automatic MDI-X detection.
We'll ruin network connection on the PXE server in the process, so make
sure you don't run anything critical.

Shut down Network Manager and manually assign an IP address to the
Ethernet interface:

    # ifconfig eth0 up
    # ifconfig eth0 10.0.0.1 netmask 255.255.255.0

Save the following contents to `/etc/dhcp/dhcpd.conf`:

    allow booting;
    allow bootp;
    next-server 10.0.0.1;
    filename "pxelinux.0";

    subnet 10.0.0.0 netmask 255.255.255.0 {
      option domain-name "pxe.local";
      option routers 10.0.0.1;
      range 10.0.0.110 10.0.0.120;
    }

Now let's make sure TFTP and DHCP servers are using the latest
configuration:

    # systemctl restart tftpd-hpa
    # systemctl restart isc-dhcp-server

At this point, the PXE client should be able to boot the installation
image.
